{{ block title }}
    New Instructions
{{ endblock }}

{{block content}}

<p>
    {{if participant.group == 'klee'}}
        you should choose one painting which belongs to Klee among all 5 paintings. You can chat with your partners in your group to find the correct answer.
    {{else}}
        you should choose one painting which belongs to Kandinsky among all 5 paintings. You can chat with your partners in your group to find the correct answer.
    {{endif}}

</p>


{{ if player.round_number == 1 }}
<p>
        <img src="{{ static 'kk2_images/klee/klee11.jpg' }}" style="width:300px; height: 300px;" />
        <img src="{{ static 'kk2_images/klee/klee12.jpg' }}" style="width:300px; height: 300px;"/>
        <img src="{{ static 'kk2_images/klee/klee13.jpg' }}" style="width:300px; height: 300px;"/>
        <img src="{{ static 'kk2_images/klee/klee14.jpg' }}" style="width:300px; height: 300px;"/>
        <img src="{{ static 'kk2_images/klee/klee15.jpg' }}" style="width:300px; height: 300px;"/>
</p>
{{ else }}
<p>
        <img src="{{ static 'kk2_images/klee/klee21.jpg' }}" style="width:300px; height: 300px;" />
        <img src="{{ static 'kk2_images/klee/klee22.jpg' }}" style="width:300px; height: 300px;"/>
        <img src="{{ static 'kk2_images/klee/klee23.jpg' }}" style="width:300px; height: 300px;"/>
        <img src="{{ static 'kk2_images/klee/klee24.jpg' }}" style="width:300px; height: 300px;"/>
        <img src="{{ static 'kk2_images/klee/klee25.jpg' }}" style="width:300px; height: 300px;"/>
</p>
{{ endif }}

{{if participant.group == 'klee'}}
        {{player.klee_quiz }}
{{else}}
        {{player.kandinsky_quiz}}
{{endif}}

<div id="chat_messages">
</div>

<div>
    <input type="text" id="chat_input">
    <button type="button" onclick="sendMsg()">Send</button>
</div>


{{ next_button }}



<script>

    let chat_input = document.getElementById('chat_input');

    chat_input.addEventListener("keydown", function (event) {
        if (event.key === "Enter") {
            sendMsg();
        }
    });

    function sendMsg() {
        let text = chat_input.value.trim();
        if (text) {
            liveSend({'text': text});
        }
        chat_input.value = '';
    }

    let chat_messages = document.getElementById('chat_messages');

    function liveRecv(messages) {
        for (let msg of messages) {
            let msgSpan = document.createElement('span');
            msgSpan.textContent = msg.text;
            let sender = msg.sender === js_vars.my_id ? 'Me' : `Player ${msg.sender}`;
            let row = `<div><b>${sender}</b>: ${msgSpan.innerHTML}</div>`;
            chat_messages.insertAdjacentHTML('beforeend', row);
        }
    }

    document.addEventListener("DOMContentLoaded", function (event) {
        liveSend({});
    });

</script>

{{ endblock }}


